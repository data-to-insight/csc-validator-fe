!function(){"use strict";var e,t;!function(e){e.PYODIDE="pyodide",e.WEB="web",e.STATIC="static"}(e||(e={})),function(e){e.IDLE="IDLE",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY",e.ERROR="ERROR"}(t||(t={}));var n,r={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}for(var i=[],s=0;s<256;++s)i.push((s+256).toString(16).slice(1));function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}var u,l=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=o[i];return t}return c(o)},d=function(){var e=this;this.files={},this.serializer=function(t,n){if(n instanceof File){var r=l();return e.files[r]=n,{__type__:"file",cid:r}}if(n instanceof FileList){for(var o=[],a=0;a<n.length;a++)o.push(n[a]);return o}return n},this.formDataAppend=function(t){Object.keys(e.files).forEach((function(n){t.append(n,e.files[n])}))}};!function(e){e.INIT="INIT",e.RUN="RUN"}(u||(u={}));var f,p,y=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};"function"===typeof importScripts&&importScripts("https://cdn.jsdelivr.net/pyodide/v0.21.2/full/pyodide.js");var h=function(e){return e.map||(e=[e]),e},b=function(e,t,n){return y(void 0,void 0,void 0,(function(){var r,o,a;return v(this,(function(i){switch(i.label){case 0:return r=new d,o=JSON.stringify(n,r.serializer),[4,p.rpc(t,o,r.files)];case 1:return a=i.sent(),self.postMessage({id:e,body:a?JSON.parse(a):void 0}),[2]}}))}))};onmessage=function(e){return y(void 0,void 0,void 0,(function(){var n;return v(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),e.data.action!==u.INIT?[3,2]:[4,(o=e.data.id,a=e.data.body,y(void 0,void 0,void 0,(function(){var e,n,r;return v(this,(function(i){switch(i.label){case 0:return self.postMessage({id:o,body:t.LOADING}),[4,self.loadPyodide()];case 1:return f=i.sent(),self.postMessage({id:o,body:t.LOADED}),(e=a.options||{}).nativePackages?(r=h(e.nativePackages).map((function(e){return console.log("loading native package",e),f.loadPackage(e)})),[4,Promise.all(r)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,f.loadPackage("micropip")];case 4:return i.sent(),n=f.pyimport("micropip"),e.packages?(r=h(e.packages).map((function(e){return console.log("micropip installing",e),n.install(e)})),[4,Promise.all(r)]):[3,6];case 5:i.sent(),i.label=6;case 6:return p=f.pyimport("rpc_wrap.pyodide").PyodideSession(e.appName),self.postMessage({id:o,body:t.READY}),[2]}}))})))];case 1:return r.sent(),[3,4];case 2:return e.data.action!==u.RUN?[3,4]:[4,b(e.data.id,e.data.body.method,e.data.body.value)];case 3:r.sent(),r.label=4;case 4:return[3,6];case 5:return n=r.sent(),console.error("Error occurred during pyodide action",n),self.postMessage({id:e.data.id,error:n}),[3,6];case 6:return[2]}var o,a}))}))}}();
//# sourceMappingURL=946.39c55ad3.chunk.js.map