{"version":3,"file":"static/js/44.e8df59b0.chunk.js","mappings":"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","sources":["../node_modules/@sfdl/prpc/dist/esm/types/index.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@sfdl/prpc/dist/esm/workers/pyodide.types.js","../node_modules/@sfdl/prpc/dist/esm/util/dataTransfer.js","../node_modules/@sfdl/prpc/dist/esm/workers/pyodide.worker.js"],"sourcesContent":["export var APITransport;\n(function (APITransport) {\n    APITransport[\"PYODIDE\"] = \"pyodide\";\n    APITransport[\"WEB\"] = \"web\";\n    APITransport[\"STATIC\"] = \"static\";\n})(APITransport || (APITransport = {}));\nexport var LoadStatus;\n(function (LoadStatus) {\n    LoadStatus[\"IDLE\"] = \"IDLE\";\n    LoadStatus[\"LOADING\"] = \"LOADING\";\n    LoadStatus[\"LOADED\"] = \"LOADED\";\n    LoadStatus[\"READY\"] = \"READY\";\n    LoadStatus[\"ERROR\"] = \"ERROR\";\n})(LoadStatus || (LoadStatus = {}));\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","export var PyodideWorkerAction;\n(function (PyodideWorkerAction) {\n    PyodideWorkerAction[\"INIT\"] = \"INIT\";\n    PyodideWorkerAction[\"RUN\"] = \"RUN\";\n})(PyodideWorkerAction || (PyodideWorkerAction = {}));\n","import { v4 as uuidv4 } from 'uuid';\nvar AttachedFileSerializer = /** @class */ (function () {\n    function AttachedFileSerializer() {\n        var _this = this;\n        /**\n         * A class for managing JSON with file uploads. Supports both File and FileList\n         * and replaces these with a `cid:` URL and attaches the file.\n         *\n         * Use with the custom serialiser option JSON.stringify:\n         *\n         * const files = new AttachedFileSerializer();\n         * const json = JSON.stringify(data, files.serializer);\n         *\n         */\n        this.files = {};\n        this.serializer = function (key, value) {\n            if (value instanceof File) {\n                var guid = uuidv4();\n                _this.files[guid] = value;\n                return { __type__: 'file', cid: guid };\n            }\n            else if (value instanceof FileList) {\n                var fileArray = [];\n                for (var i = 0; i < value.length; i++) {\n                    fileArray.push(value[i]);\n                }\n                return fileArray;\n            }\n            return value;\n        };\n        this.formDataAppend = function (formData) {\n            Object.keys(_this.files).forEach(function (k) {\n                formData.append(k, _this.files[k]);\n            });\n        };\n    }\n    return AttachedFileSerializer;\n}());\nexport { AttachedFileSerializer };\n","/* eslint-disable no-restricted-globals */\n// need this because workers need access to the self pseudo-global scope\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { LoadStatus } from '../types';\nimport { AttachedFileSerializer } from '../util/dataTransfer';\nimport { PyodideWorkerAction, } from './pyodide.types';\n//importScripts is a global. Only run it if it is available (ignore if the module is loaded onto window)\n// @ts-ignore: importScripts on global causes choke in def file\nif (typeof importScripts === 'function') {\n    // @ts-ignore: importScripts on global causes choke in def file\n    importScripts('https://cdn.jsdelivr.net/pyodide/v0.21.2/full/pyodide.js');\n}\nvar pyodideInst;\nvar apiApp;\nvar ensure_array = function (value) {\n    if (!value.map) {\n        value = [value];\n    }\n    return value;\n};\nvar initializePyodide = function (id, config) { return __awaiter(void 0, void 0, void 0, function () {\n    var options, installs, micropip, installs;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                self.postMessage({ id: id, body: LoadStatus.LOADING });\n                return [4 /*yield*/, self.loadPyodide()];\n            case 1:\n                pyodideInst = _a.sent();\n                self.postMessage({ id: id, body: LoadStatus.LOADED });\n                options = config.options || {};\n                if (!options.nativePackages) return [3 /*break*/, 3];\n                installs = ensure_array(options.nativePackages).map(function (pgk) {\n                    console.log('loading native package', pgk);\n                    return pyodideInst.loadPackage(pgk);\n                });\n                return [4 /*yield*/, Promise.all(installs)];\n            case 2:\n                _a.sent();\n                _a.label = 3;\n            case 3: \n            // Install micropip packages\n            return [4 /*yield*/, pyodideInst.loadPackage('micropip')];\n            case 4:\n                // Install micropip packages\n                _a.sent();\n                micropip = pyodideInst.pyimport('micropip');\n                if (!options.packages) return [3 /*break*/, 6];\n                installs = ensure_array(options.packages).map(function (pgk) {\n                    console.log('micropip installing', pgk);\n                    return micropip.install(pgk);\n                });\n                return [4 /*yield*/, Promise.all(installs)];\n            case 5:\n                _a.sent();\n                _a.label = 6;\n            case 6:\n                // Launch RCP app\n                apiApp = pyodideInst\n                    .pyimport(\"rpc_wrap.pyodide\")\n                    .PyodideSession(options.appName);\n                self.postMessage({ id: id, body: LoadStatus.READY });\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar runPyodideCode = function (id, method, value) { return __awaiter(void 0, void 0, void 0, function () {\n    var serializer, payloadJSON, response;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                serializer = new AttachedFileSerializer();\n                payloadJSON = JSON.stringify(value, serializer.serializer);\n                return [4 /*yield*/, apiApp.rpc(method, payloadJSON, serializer.files)];\n            case 1:\n                response = _a.sent();\n                self.postMessage({\n                    id: id,\n                    body: response ? JSON.parse(response) : undefined,\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\nonmessage = function (evt) { return __awaiter(void 0, void 0, void 0, function () {\n    var error_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 5, , 6]);\n                if (!(evt.data.action === PyodideWorkerAction.INIT)) return [3 /*break*/, 2];\n                return [4 /*yield*/, initializePyodide(evt.data.id, evt.data.body)];\n            case 1:\n                _a.sent();\n                return [3 /*break*/, 4];\n            case 2:\n                if (!(evt.data.action === PyodideWorkerAction.RUN)) return [3 /*break*/, 4];\n                return [4 /*yield*/, runPyodideCode(evt.data.id, evt.data.body.method, evt.data.body.value)];\n            case 3:\n                _a.sent();\n                _a.label = 4;\n            case 4: return [3 /*break*/, 6];\n            case 5:\n                error_1 = _a.sent();\n                console.error('Error occurred during pyodide action', error_1);\n                self.postMessage({ id: evt.data.id, error: error_1 });\n                return [3 /*break*/, 6];\n            case 6: return [2 /*return*/];\n        }\n    });\n}); };\n"],"names":["APITransport","LoadStatus","getRandomValues","randomUUID","crypto","bind","rnds8","Uint8Array","rng","Error","byteToHex","i","push","toString","slice","unsafeStringify","arr","offset","toLowerCase","PyodideWorkerAction","options","buf","native","rnds","random","AttachedFileSerializer","_this","this","files","serializer","key","value","File","guid","uuidv4","__type__","cid","FileList","fileArray","length","formDataAppend","formData","Object","keys","forEach","k","append","pyodideInst","apiApp","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","importScripts","ensure_array","map","runPyodideCode","id","method","payloadJSON","response","_a","JSON","stringify","rpc","self","postMessage","parse","undefined","onmessage","evt","error_1","data","action","INIT","config","micropip","installs","LOADING","loadPyodide","LOADED","nativePackages","pgk","console","log","loadPackage","all","pyimport","packages","install","PyodideSession","appName","READY","RUN","error"],"sourceRoot":""}